import React, { useState, useEffect, useRef } from 'react';
import { 
  CheckCircle2, XCircle, RefreshCw, Play, ArrowRight, 
  Home, Award, BarChart, Layers, Clock, AlertTriangle, 
  History, Trash2, ChevronLeft, Calendar
} from 'lucide-react';

// æ“´å……è‡³ 100 å€‹ä»»å‹™çš„ä»»å‹™åº« (50 åŸºç¤ + 50 é€²éš)
const TASKS_LIBRARY = [
  // --- åŸºç¤ç‰ˆ (5 æ­¥é©Ÿ) ---
  { id: 1, difficulty: 'basic', title: "æ—©èµ·åˆ·ç‰™", icon: "ğŸª¥", steps: ["æ‹¿èµ·ç‰™åˆ·èˆ‡ç‰™è†", "å°‡ç‰™è†æ“ åœ¨ç‰™åˆ·ä¸Š", "æ”¾å…¥å£ä¸­å‡å‹»åˆ·éç‰™é½’", "ç”¨æ°´æ¼±å£ä¸¦åæ‰æ³¡æ²«", "æ¸…æ´—ç‰™åˆ·ä¸¦æ”¾å›åŸä½"] },
  { id: 2, difficulty: 'basic', title: "æ´—æ‰‹æ¶ˆæ¯’", icon: "ğŸ§¼", steps: ["æ‰“é–‹æ°´é¾é ­å¼„æ¿•é›™æ‰‹", "æŠ¹ä¸Šè‚¥çš‚ä¸¦æ“å‡ºæ³¡æ²«", "æ“æ‰æ‰‹å¿ƒæ‰‹èƒŒèˆ‡æŒ‡ç¸«", "ç”¨æ¸…æ°´å°‡æ³¡æ²«æ²–ä¹¾æ·¨", "ç”¨ä¹¾æ·¨æ¯›å·¾å°‡æ‰‹æ“¦ä¹¾"] },
  { id: 3, difficulty: 'basic', title: "ç©¿è¥¯è¡«", icon: "ğŸ‘”", steps: ["æ‹¿èµ·è¥¯è¡«æŠ«åœ¨è‚©ä¸Š", "å³æ‰‹ä¼¸é€²å³é‚Šè¢–å­", "å·¦æ‰‹ä¼¸é€²å·¦é‚Šè¢–å­", "ç”±ä¸‹å¾€ä¸Šæ‰£å¥½æ‰£å­", "èª¿æ•´é ˜å£ä¸¦ç…§é¡å­"] },
  { id: 4, difficulty: 'basic', title: "æ³¡ä¸€æ¯èŒ¶", icon: "ğŸµ", steps: ["å°‡èŒ¶åŒ…æ”¾é€²æ¯å­ä¸­", "ç‡’é–‹ä¸€å£ºä¹¾æ·¨çš„æ°´", "å°‡ç†±æ°´å€’å…¥æ¯å­ä¸­", "ç­‰å¾…ç´„ä¸‰åˆ†é˜å‡ºå‘³", "å–å‡ºèŒ¶åŒ…å¾Œæ…¢æ…¢äº«ç”¨"] },
  { id: 5, difficulty: 'basic', title: "æ¾†èŠ±æ°´", icon: "ğŸš¿", steps: ["æ‹¿å–æ¾†æ°´å£ºä¸¦è£æ°´", "èµ°åˆ°ç›†æ ½æ—é‚Š", "ç·©æ…¢å°‡æ°´å€’å…¥åœŸå£¤", "è§€å¯Ÿæ°´æ˜¯å¦æµå‡ºåº•éƒ¨", "å°‡æ°´å£ºæ”¶å›åŸä½"] },
  { id: 6, difficulty: 'basic', title: "ä¸Ÿåƒåœ¾", icon: "ğŸ—‘ï¸", steps: ["æ•´ç†ä¸¦ç¶å¥½åƒåœ¾è¢‹", "å°‡è¢‹å­æåˆ°é–€å£", "ç­‰å¾…åƒåœ¾è»ŠéŸ³æ¨‚è²", "å°‡åƒåœ¾æŠ•é€²åƒåœ¾è»Š", "å›å®¶å¾Œç”¨è‚¥çš‚æ´—æ‰‹"] },
  { id: 7, difficulty: 'basic', title: "åƒè—¥è—¥", icon: "ğŸ’Š", steps: ["æ ¸å°è—¥åŒ…å§“åèˆ‡æ™‚é–“", "å€’ä¸€æ¯æº«é–‹æ°´æº–å‚™", "å–å‡ºæ­£ç¢ºåŠ‘é‡çš„è—¥ç‰‡", "å°‡è—¥ç‰‡å«å…¥å£ä¸­é€æœ", "å°‡æ°´å–å®Œä¸¦è§€å¯Ÿåæ‡‰"] },
  { id: 8, difficulty: 'basic', title: "æ‘ºè¡£æœ", icon: "ğŸ‘•", steps: ["å¾æ™¾è¡£ç¹©æ”¶ä¸‹è¡£ç‰©", "å¹³é‹ªåœ¨ä¹¾æ·¨çš„åºŠä¸Š", "å°æ‘ºå…©è¢–èˆ‡èº«èº¯", "å°é½Šé‚Šç·£æ•´é½Šæ”¶ç´", "æ”¾å›è¡£æ«ƒæŒ‡å®šæŠ½å±œ"] },
  { id: 9, difficulty: 'basic', title: "ä½¿ç”¨å¾®æ³¢çˆ", icon: "â²ï¸", steps: ["å°‡é£Ÿç‰©æ”¾é€²å¾®æ³¢ç›’", "æ”¾å…¥å¾®æ³¢çˆä¸¦é—œé–€", "æ—‹è½‰æˆ–è¼¸å…¥åŠ ç†±æ™‚é–“", "ç­‰å¾…æç¤ºéŸ³éŸ¿èµ·", "å–å‡ºé£Ÿç‰©ä¸¦å°å¿ƒç‡™æ‰‹"] },
  { id: 10, difficulty: 'basic', title: "æ¢³é ­é«®", icon: "ğŸª®", steps: ["ç«™åœ¨é¡å­å‰é¢", "æ‹¿èµ·æ¢³å­æˆ–é«®åˆ·", "å¾é«®æ ¹æ¢³å‘é«®æ¢¢", "æ•´ç†å‡ºæ•´é½Šçš„é«®å‹", "æ¸…ç†æ¢³å­ä¸Šçš„é«®çµ²"] },
  { id: 11, difficulty: 'basic', title: "æ´—æ°´æœ", icon: "ğŸ", steps: ["å°‡æ°´æœæ”¾å…¥æ¿¾ç±ƒä¸­", "ç”¨æµå‹•æ¸…æ°´æ²–æ´—è¡¨é¢", "è¼•è¼•æ“æ‰æ°´æœå¤–çš®", "ç€ä¹¾å¤šé¤˜çš„æ°´åˆ†", "æ”¾å…¥ç›¤å­ä¸­æº–å‚™é£Ÿç”¨"] },
  { id: 12, difficulty: 'basic', title: "ç©¿é‹å­", icon: "ğŸ‘Ÿ", steps: ["ååœ¨ç©¿é‹æ¤…ä¸Š", "é›™è…³å¥—å…¥é‹å…§", "æ‹‰å¥½é‹è·Ÿä¸¦æ•´ç†è¥ªå­", "ç¹«å¥½é‹å¸¶æˆ–é»ä¸Šé­”é¬¼æ°ˆ", "ç«™èµ·ä¾†èµ°å‹•ç¢ºèªèˆ’é©åº¦"] },
  { id: 13, difficulty: 'basic', title: "æ•´ç†åºŠé‹ª", icon: "ğŸ›Œ", steps: ["ä¸‹åºŠå¾Œæ‹‰å¹³åºŠå–®", "å°‡æ£‰è¢«å°æ‘ºæ•´é½Š", "æ‹é¬†æ•é ­ä¸¦æ”¾å¥½", "æ‹‰ç›´å››å‘¨çš„æ‘ºç—•", "æ”¾ä¸Šè£é£¾å°æ•æˆ–ç©å¶"] },
  { id: 14, difficulty: 'basic', title: "ç…®æ°´é¤ƒ", icon: "ğŸ¥Ÿ", steps: ["å¤§é‹è£æ°´ç‡’è‡³æ²¸é¨°", "æ”¾å…¥å†·å‡æ°´é¤ƒ", "ç”¨å‹ºå­è¼•è¼•æ”ªå‹•é˜²é»", "å¾…æ°´é¤ƒæµ®èµ·å¾Œå†ç…®ä¸€åˆ†", "æ’ˆèµ·ç€ä¹¾è£ç›¤"] },
  { id: 15, difficulty: 'basic', title: "å€’æ°´å–", icon: "ğŸ¥›", steps: ["æ‹¿å–ä¹¾æ·¨çš„æ°´æ¯", "èµ°åˆ°é£²æ°´æ©Ÿæˆ–æ°´å£ºæ—", "å¹³ç©©åœ°å°‡æ°´æ³¨å…¥æ¯ä¸­", "å€’è‡³ç´„å…«åˆ†æ»¿è™•åœæ­¢", "æ”¶å›æ¯å­ä¸¦é—œé–‰é–‹é—œ"] },
  { id: 16, difficulty: 'basic', title: "æƒåœ°", icon: "ğŸ§¹", steps: ["æ‹¿èµ·æƒå¸šèˆ‡ç•šç®•", "å¾æˆ¿é–“è§’è½å¾€å…§æƒ", "å°‡ç°å¡µé›†ä¸­æˆä¸€å †", "æƒé€²ç•šç®•å…§å€’é€²åƒåœ¾æ¡¶", "æ”¾å›æ¸…æ½”ç”¨å…·"] },
  { id: 17, difficulty: 'basic', title: "æ›ç‡ˆæ³¡", icon: "ğŸ’¡", steps: ["é—œé–‰é›»æºé–‹é—œ", "æº–å‚™å¥½æ–°çš„ç‡ˆæ³¡", "è½‰ä¸‹ç‡’å£çš„èˆŠç‡ˆæ³¡", "è½‰å…¥æ–°ç‡ˆæ³¡è‡³å¡ç·Š", "æ‰“é–‹é–‹é—œæ¸¬è©¦äº®åº¦"] },
  { id: 18, difficulty: 'basic', title: "å¯„ä¿¡", icon: "âœ‰ï¸", steps: ["å¯«å¥½ä¿¡ä»¶èˆ‡æ”¶ä»¶åœ°å€", "è²¼ä¸Šæ­£ç¢ºé‡‘é¡éƒµç¥¨", "æª¢æŸ¥ä¿¡å°æ˜¯å¦å°å¥½", "èµ°åˆ°è¡—é‚Šçš„éƒµç­’æ—", "å°‡ä¿¡ä»¶æŠ•å…¥æ”¶ä¿¡å£"] },
  { id: 19, difficulty: 'basic', title: "çƒ¤åå¸", icon: "ğŸ", steps: ["å–å‡ºå…©ç‰‡ç™½åå¸", "æ”¾é€²çƒ¤åå¸æ©Ÿå…§", "è¨­å®šåŠ ç†±ç„¦åº¦ç­‰ç´š", "å¾…åå¸å½ˆèµ·å¾Œå–å‡º", "æŠ¹ä¸Šå–œæ­¡çš„æœé†¬"] },
  { id: 20, difficulty: 'basic', title: "è½éŸ³æ¨‚", icon: "ğŸµ", steps: ["æ‰“é–‹æ’­æ”¾å™¨æˆ–æ‰‹æ©Ÿ", "æˆ´ä¸Šè€³æ©Ÿæˆ–æ‰“é–‹å–‡å­", "æœå°‹æƒ³è½çš„æ­Œæ‰‹åç¨±", "é»é¸æ’­æ”¾é–‹å§‹è†è½", "èª¿æ•´åˆ°èˆ’é©éŸ³é‡"] },
  { id: 21, difficulty: 'basic', title: "ä¿®å‰ªæŒ‡ç”²", icon: "âœ‚ï¸", steps: ["æº–å‚™å¥½æŒ‡ç”²å‰ª", "æ‰¾ä¸€å€‹å…‰ç·šå……è¶³è™•", "ç´°å¿ƒä¿®å‰ªæŒ‡ç”²é‚Šç·£", "ç”¨éŠ¼åˆ€ç£¨å¹³ç²—ç³™è™•", "æ¸…ç†å‰ªä¸‹çš„æŒ‡ç”²å±‘"] },
  { id: 22, difficulty: 'basic', title: "æ­å…¬è»Š", icon: "ğŸšŒ", steps: ["åœ¨å…¬è»Šç«™ç‰Œç­‰å€™", "çœ‹åˆ°è»Šè™Ÿæ‹›æ‰‹ç¤ºæ„", "ä¸Šè»Šåˆ·å¡æˆ–æŠ•å¹£", "æ³¨æ„ç«™åé å‚™ä¸‹è»Š", "æŒ‰ä¸‹è»Šéˆ´ä¸¦åˆ·å¡ä¸‹è»Š"] },
  { id: 23, difficulty: 'basic', title: "ä½¿ç”¨é™æ§å™¨", icon: "ğŸ“º", steps: ["æ‹¿èµ·é›»è¦–é™æ§å™¨", "æŒ‰ä¸‹ç´…è‰²çš„é–‹é—œéµ", "æŒ‰é »é“éµå°‹æ‰¾ç¯€ç›®", "æŒ‰éŸ³é‡éµèª¿æ•´è²éŸ³", "ä¸çœ‹æ™‚å†æŒ‰ä¸€æ¬¡é—œé–‰"] },
  { id: 24, difficulty: 'basic', title: "æ´—è‡‰", icon: "ğŸ§¼", steps: ["å¼„æ¿•è‡‰éƒ¨èˆ‡é›™æ‰‹", "æ“ å‡ºå°‘é‡æ´—é¢ä¹³", "åœ¨è‡‰ä¸ŠåŠƒåœ“æ“æ´—", "ç”¨æ¸…æ°´å¾¹åº•æ²–æ·¨", "ç”¨ä¹¾æ¯›å·¾æŒ‰ä¹¾è‡‰éƒ¨"] },
  { id: 25, difficulty: 'basic', title: "æ‘ºç´™é£›æ©Ÿ", icon: "âœˆï¸", steps: ["æº–å‚™ä¸€å¼µé•·æ–¹å½¢ç´™", "å°æ‘ºæ‰¾å‡ºä¸­å¿ƒç·š", "å°‡å‰ç«¯å…©è§’å‘å…§æ‘º", "å°æ‘ºæ©Ÿèº«ä¸¦å£“å¹³", "æ‘ºå‡ºå·¦å³æ©Ÿç¿¼"] },
  { id: 51, difficulty: 'basic', title: "ç©¿å¤–å¥—", icon: "ğŸ§¥", steps: ["æŠ“èµ·å¤–å¥—é ˜å£", "ä¸€éš»æ‰‹ç©¿é€²è¢–ç®¡", "å¦ä¸€éš»æ‰‹èƒŒå¾Œå°‹æ‰¾è¢–å£", "å…©æ‰‹ä¼¸ç›´æ‹‰å¥½è¡£æœ", "æ‹‰ä¸Šæ‹‰éŠæˆ–æ‰£å¥½æ‰£å­"] },
  { id: 52, difficulty: 'basic', title: "ç¹«å®‰å…¨å¸¶", icon: "å®‰å…¨å¸¶", steps: ["ååœ¨æ±½è»Šåº§ä½ä¸Š", "æ‰‹æ‹‰ä½å®‰å…¨å¸¶æ’é ­", "æ‹‰éèƒ¸å‰æ©«è·¨èº«é«”", "å°æº–æ’æ§½ç”¨åŠ›æ’ä¸‹", "è½åˆ°å–€åš“è²å¾Œæ‹‰æ‹‰çœ‹"] },
  { id: 53, difficulty: 'basic', title: "æ”¶é›¨å‚˜", icon: "ğŸŒ‚", steps: ["èµ°åˆ°å®¤å…§å±‹ç°·ä¸‹", "æŒ‰ä¸‹æ”¶å‚˜æŒ‰éˆ•æˆ–æ»‘å‹•", "è¼•è¼•æŠ–æ‰å‚˜é¢æ°´ç ", "å°‡å‚˜å¸ƒé †è‘—å‚˜éª¨æ²èµ·", "æ‰£ä¸Šé­”é¬¼æ°ˆç¶‘ç¶å¸¶"] },
  { id: 54, difficulty: 'basic', title: "è²¼OKç¹ƒ", icon: "ğŸ©¹", steps: ["æ¸…æ½”ä¸¦æ“¦ä¹¾å‚·å£", "æ’•é–‹OKç¹ƒå¤–å±¤åŒ…è£", "æ’•ä¸‹å…¶ä¸­ä¸€é‚ŠèƒŒè† ç´™", "å°æº–å‚·å£è¼•è¼•è²¼ä¸Š", "æ’•æ‰å¦ä¸€é‚Šç´™ä¸¦å£“å¹³"] },
  { id: 55, difficulty: 'basic', title: "å‰Šé‰›ç­†", icon: "âœï¸", steps: ["æº–å‚™å‰Šé‰›ç­†æ©Ÿèˆ‡é‰›ç­†", "å°‡é‰›ç­†æ’å…¥å‰Šå­”", "æ¡ä½æ©Ÿèº«å›ºå®šå¥½", "é †æ™‚é‡æ—‹è½‰æ‰‹æŠŠ", "å–å‡ºç¢ºèªç­†å°–éŠ³åˆ©"] },
  { id: 56, difficulty: 'basic', title: "é‡é«”æº«", icon: "ğŸŒ¡ï¸", steps: ["æ‹¿å‡ºé«”æº«è¨ˆæª¢æŸ¥æ•¸å€¼", "æ”¾åœ¨è…‹ä¸‹æˆ–é¡é ­å°æº–", "éœå€™å¹¾ç§’é˜ç­‰å¾…è­¦å ±", "è®€å–è¢å¹•ä¸Šçš„æ•¸å­—", "ç”¨é…’ç²¾æ£‰ç‰‡æ¶ˆæ¯’å„€å™¨"] },
  { id: 57, difficulty: 'basic', title: "æˆ´å£ç½©", icon: "ğŸ˜·", steps: ["å–å‡ºä¹¾æ·¨çš„å£ç½©", "ç¢ºèªæ­£åé¢èˆ‡ä¸Šä¸‹ç·£", "å°‡æ›è€³ç¹©å¥—å…¥é›™è€³", "å£“ç·Šé¼»æ¨‘è™•é‡‘å±¬æ¢", "å‘ä¸‹æ‹‰é–‹é®ä½ä¸‹å·´"] },
  { id: 58, difficulty: 'basic', title: "å€’å»šé¤˜", icon: "ğŸ¥£", steps: ["æ”¶é›†é¤å¾Œå‰©é¤˜é£Ÿç‰©", "ç€æ‰éå¤šçš„æ¹¯æ±", "å€’å…¥å»šé¤˜æ¡¶è“‹ç·Š", "æè‘—æ°´ç›†åˆ°æ°´æ§½", "ç”¨æ´—ç¢—ç²¾åˆ·æ´—ç©ºç›†"] },
  { id: 59, difficulty: 'basic', title: "æˆ´å¸½å­", icon: "ğŸ§¢", steps: ["æŒ‘é¸å–œæ­¡çš„å¸½å­", "æ‰‹æ‰¶ä½å¸½æ²¿å…©å´", "ç”±é¡é ­å¾€å¾Œè…¦å‹ºå¥—ä¸‹", "èª¿æ•´å‰å¾Œä½ç½®èˆ‡é«˜ä½", "ç…§é¡å­ç¢ºèªæ˜¯å¦ç«¯æ­£"] },
  { id: 60, difficulty: 'basic', title: "è“‹å°ç« ", icon: "ğŸ–„", steps: ["æº–å‚™æ–‡ä»¶èˆ‡å°ç« ", "ç¢ºèªå°ç« è“‹é¢æœä¸‹", "åœ¨å°æ³¥ä¸Šå‡å‹»æ²¾å–", "å‚ç›´å°æº–è“‹ç« ä½ç½®", "ç”¨åŠ›ä¸‹å£“å¾Œå‚ç›´æèµ·"] },
  { id: 61, difficulty: 'basic', title: "ç©¿è¥ªå­", icon: "ğŸ§¦", steps: ["æ‹¿å‡ºä¸€é›™ä¹¾æ·¨è¥ªå­", "é›™æ‰‹æ’é–‹è¥ªå£", "å°æº–è…³å°–å¥—å…¥", "é †è‘—è…³è·Ÿå¾€ä¸Šæ‹‰", "ç†å¹³è…³èƒŒçš„æ‘ºç—•"] },
  { id: 62, difficulty: 'basic', title: "é—œçª—æˆ¶", icon: "ğŸªŸ", steps: ["èµ°å‘é–‹å•Ÿçš„çª—é‚Š", "æŠ“ä½çª—æˆ¶æŠŠæ‰‹", "ç·©ç·©å‘å…§æˆ–å‘å´æ¨ç§»", "ç¢ºèªçª—é‚Šå®Œå…¨å¯†åˆ", "æ‰£ä¸Šå®‰å…¨é–æ‰£"] },
  { id: 63, difficulty: 'basic', title: "æ•´ç†å ±ç´™", icon: "ğŸ“°", steps: ["æ”¶é›†æ•£äº‚çš„å„ç‰ˆå ±ç´™", "ä¾ç…§ç‰ˆåºå°é½Šé‚Šç·£", "å°‡å ±ç´™å°æ‘ºæˆä¸€åŠ", "æ”¾åœ¨æŒ‡å®šçš„èˆŠå ±å †", "å»æ´—æ‰‹æ´—æ‰æ²¹å¢¨"] },
  { id: 64, difficulty: 'basic', title: "åˆ‡é¦™è•‰", icon: "ğŸŒ", steps: ["æ´—æ·¨é›™æ‰‹ä¸¦æ‹¿é¤åˆ€", "å‰é–‹é¦™è•‰çš„å¤–çš®", "æ”¾åœ¨ä¹¾æ·¨çš„ç›¤å­ä¸Š", "åˆ‡æˆä¸€å¡Šå¡Šåœ“å½¢", "æ”¶æ‹¾é¦™è•‰çš®ä¸Ÿæ£„"] },
  { id: 65, difficulty: 'basic', title: "æ›è¡£æœ", icon: "ğŸ§¥", steps: ["æº–å‚™å¥½ç©ºè¡£æ¶", "æ‹¿èµ·æ´—å¥½çš„è¡£ç‰©", "å°‡è¡£æ¶æ’é€²é ˜å£", "èª¿æ•´å·¦å³è‚©ä½ç½®", "æ›å…¥è¡£æ«¥æ©«æ¡¿ä¸Š"] },
  { id: 66, difficulty: 'basic', title: "ç¿»æ—¥æ›†", icon: "ğŸ“…", steps: ["ç¢ºèªä»Šå¤©çš„æ—¥æœŸ", "æ’•ä¸‹æ˜¨å¤©çš„æ—¥æ›†ç´™", "å°é½Šè™›ç·šå°å¿ƒæ’•é–‹", "å°‡å»¢ç´™ä¸Ÿå…¥è³‡æºå›æ”¶", "çœ‹ä¸€çœ¼ä»Šå¤©çš„è¾²æ›†æˆ–å‚™è¨»"] },
  { id: 67, difficulty: 'basic', title: "ä½¿ç”¨è¨‚æ›¸æ©Ÿ", icon: "ğŸ“Œ", steps: ["æ•´ç†å¥½è¦è£è¨‚çš„ç´™å¼µ", "å°é½Šå·¦ä¸Šè§’çš„é‚Šç·£", "å°‡ç´™æ”¾é€²è¨‚æ›¸æ©Ÿå£", "ç”¨åŠ›å£“ä¸‹è¨‚æ›¸æ©Ÿé ‚éƒ¨", "æª¢æŸ¥é‡˜å­æ˜¯å¦å£“å¹³"] },
  { id: 68, difficulty: 'basic', title: "é‡é«”é‡", icon: "âš–ï¸", steps: ["å°‡é«”é‡è¨ˆæ”¾åœ¨å¹³åœ°", "è„«æ‰åšé‡å¤–å¥—æˆ–é‹å­", "é›™è…³å¹³è¡¡ç«™åœ¨ä¸­å¤®", "éœæ­¢ç­‰å¾…æ•¸å­—å›ºå®š", "ç´€éŒ„æ•¸å€¼å¾Œèµ°ä¸‹ç§¤å­"] },
  { id: 69, difficulty: 'basic', title: "å–åˆ©æ¨‚åŒ…", icon: "ğŸ§ƒ", steps: ["æ‹¿å–ä¸€ç›’ç´™ç›’é£²æ–™", "æ‹”ä¸‹å´é‚Šçš„å¸ç®¡", "æ’•é–‹å¸ç®¡å¡‘è† å¥—", "æ’å…¥åœ“å­”éŒ«ç®”ç´™", "æ…¢æ…¢å¸å®ä¸¦æ³¨æ„æº¢å‡º"] },
  { id: 70, difficulty: 'basic', title: "æ¢³é¬é¬š", icon: "ğŸ§”", steps: ["ç«™åœ¨é¡å­å‰é¢", "æ‹¿èµ·å°ˆç”¨çš„é¬é¬šæ¢³", "å¾ä¸Šå¾€ä¸‹æ¢³ç†æ•´é½Š", "ä¿®å‰ªçªå‡ºçš„é›œäº‚æ¯›é«®", "ç”¨æ¿•å¸ƒæ“¦æ‹­è‡‰é °"] },
  { id: 71, difficulty: 'basic', title: "é—œç“¦æ–¯", icon: "ğŸ”¥", steps: ["ç¢ºèªé‹å…·å·²ç§»é–‹", "æ—‹è½‰çˆå°é–‹é—œè‡³é—œé–‰", "ç¢ºèªç«ç„°å®Œå…¨ç†„æ»…", "æª¢æŸ¥ç“¦æ–¯ç®¡ç·šç¸½é–‹é—œ", "é›¢é–‹å»šæˆ¿å‰å†æ¬¡å·¡è¦–"] },
  { id: 72, difficulty: 'basic', title: "æ‹¿ä¿¡ä»¶", icon: "ğŸ“®", steps: ["æ‹¿èµ·ä¿¡ç®±é‘°åŒ™", "èµ°åˆ°å¤§é–€å£çš„ä¿¡ç®±è™•", "æ’å…¥é‘°åŒ™ä¸¦è½‰å‹•é–€è“‹", "å–å‡ºæ‰€æœ‰ä¿¡ä»¶èˆ‡å»£å‘Š", "é—œå¥½ä¿¡ç®±ä¸¦æ‹”å‡ºé‘°åŒ™"] },
  { id: 73, difficulty: 'basic', title: "å¹é¢¨æ‰‡", icon: "ğŸŒ¬ï¸", steps: ["èµ°åˆ°é›»é¢¨æ‰‡æ—é‚Š", "æŒ‰ä¸‹æ’é ­é€£æ¥é›»æº", "é¸æ“‡é©åˆçš„é¢¨åŠ›å¼·å¼±", "æŒ‰ä¸‹è½‰é ­æˆ–å›ºå®šéˆ•", "äº«å—æ¶¼é¢¨ä¸¦ä¿æŒè·é›¢"] },
  { id: 74, difficulty: 'basic', title: "æ”¶ç¢—ç­·", icon: "ğŸ¥¢", steps: ["ç”¨é¤å®Œç•¢ç«™èµ·ä¾†", "å°‡ç­·å­æ”¾åœ¨ç¢—é¢ä¸Š", "é›™æ‰‹æ§èµ·ç¢—ç›¤é€åˆ°æ°´æ§½", "åˆ†é¡æ”¾ç½®å¾…æ´—å€åŸŸ", "æ“¦æ‹­è‡ªå·±ç”¨éçš„æ¡Œé¢"] },
  { id: 75, difficulty: 'basic', title: "æ‘ºè¡›ç”Ÿç´™", icon: "ğŸ§»", steps: ["æŠ½å–é©é‡çš„è¡›ç”Ÿç´™", "å°‡ç´™å¼µå¹³é‹ªåœ¨æ‰‹ä¸­", "å·¦å³å°æ‘ºæˆæ­£æ–¹å½¢", "å†æ¬¡æ‘ºç–Šå¢åŠ åšåº¦", "æ”¾å…¥é¤ç›¤æ—æˆ–å£è¢‹å‚™ç”¨"] },

  // --- é€²éšç‰ˆ (7 æ­¥é©Ÿ) ---
  { id: 26, difficulty: 'advanced', title: "æ´—è¡£æœå…¨æµç¨‹", icon: "ğŸ§º", steps: ["åˆ†é¡è¡£ç‰©æ·±æ·ºè‰²", "æ”¾é€²æ´—è¡£æ©Ÿå…§", "å€’å…¥æ´—è¡£ç²¾èˆ‡æŸ”è»Ÿç²¾", "è¨­å®šæ´—è¡£æ¨¡å¼", "å–å‡ºæ´—å¥½çš„æ¿•è¡£ç‰©", "è¡£æ¶æ’èµ·ä¸¦æ™¾åœ¨å®¤å¤–", "ä¹¾é€å¾Œæ”¶ç´å…¥æ«ƒ"] },
  { id: 27, difficulty: 'advanced', title: "ç…®æ³¡éºµåŠ è›‹", icon: "ğŸœ", steps: ["é‹å…§è£æ°´ç…®è‡³æ²¸é¨°", "æ”¾å…¥æ³¡éºµéºµå¡Š", "å€’å…¥æ‰€æœ‰èª¿å‘³æ–™åŒ…", "æ‰“å…¥ä¸€é¡†é›è›‹é€²å…¥", "è“‹ä¸Šé‹è“‹æ‚¶å…©åˆ†é˜", "æ”ªæ‹Œå‡å‹»ä½¿è›‹ç†Ÿé€", "å€’å…¥ç¢—ä¸­äº«ç”¨"] },
  { id: 28, difficulty: 'advanced', title: "ATM é ˜éŒ¢", icon: "ğŸ’µ", steps: ["æ’å…¥ææ¬¾å¡", "è¼¸å…¥å€‹äººå¯†ç¢¼", "é¸æ“‡ã€Œææ¬¾ã€åŠŸèƒ½", "è¼¸å…¥è¦é ˜å–çš„é‡‘é¡", "ç¢ºèªæ˜ç´°è¡¨éœ€æ±‚", "å–å‡ºææ¬¾å¡èˆ‡æ”¶æ“š", "é ˜å–ç¾é‡‘ä¸¦æ¸…é»"] },
  { id: 29, difficulty: 'advanced', title: "æ‰‹æ©Ÿå……é›»", icon: "ğŸ”Œ", steps: ["æ‰¾åˆ°æ‰‹æ©Ÿå……é›»ç·š", "æ’é ­æ’å…¥ç‰†å£æ’åº§", "æ¥é ­æ’å…¥æ‰‹æ©Ÿåº•éƒ¨å­”", "ç¢ºèªè¢å¹•é¡¯ç¤ºå……é›»ä¸­", "æ”¾ç½®åœ¨å®‰å…¨å¹³ç©©è™•", "å……æ»¿å¾Œå…ˆæ‹”æ‰‹æ©Ÿæ¥é ­", "æœ€å¾Œæ‹”é™¤ç‰†ä¸Šæ’é ­"] },
  { id: 30, difficulty: 'advanced', title: "é ç´„é–€è¨º", icon: "ğŸ¥", steps: ["æ‹¿å‡ºæ‰‹æ©Ÿæˆ–æ‰“é–‹é›»è…¦", "é€²å…¥é†«é™¢æ›è™Ÿç¶²ç«™", "é¸æ“‡æ­£ç¢ºçš„ç§‘åˆ¥", "æŒ‘é¸åˆé©çš„çœ‹è¨ºé†«å¸«", "ç¢ºèªæ—¥æœŸèˆ‡æ™‚æ®µ", "è¼¸å…¥èº«åˆ†è­‰å­—è™Ÿæ›è™Ÿ", "æˆªåœ–æˆ–è¨˜éŒ„æ›è™Ÿè™Ÿç¢¼"] },
  { id: 31, difficulty: 'advanced', title: "æ›´æ›åºŠå–®", icon: "ğŸ›ï¸", steps: ["ç§»é–‹åºŠä¸Šçš„æ•é ­è¢«å­", "æ‰¯ä¸‹é«’æ‰çš„èˆŠåºŠå–®", "é‹ªä¸Šä¹¾æ·¨çš„æ–°åºŠå–®", "å°‡å››å€‹è§’å›ºå®šåœ¨åºŠå¢Š", "å¥—ä¸Šä¹¾æ·¨çš„æ•é ­å¥—", "æ”¾å›è¢«å­ä¸¦é‹ªå¹³", "å°‡èˆŠåºŠå–®ä¸Ÿå…¥æ´—è¡£ç±ƒ"] },
  { id: 32, difficulty: 'advanced', title: "æº–å‚™å‡ºé–€è³¼ç‰©", icon: "ğŸ›’", steps: ["æª¢æŸ¥å®¶ä¸­ç¼ºå°‘çš„ç‰©è³‡", "å¯«ä¸‹è³¼ç‰©æ¸…å–®é …ç›®", "å¸¶ä¸Šç’°ä¿è³¼ç‰©è¢‹", "ç¢ºèªéŒ¢åŒ…èˆ‡æ‰‹æ©Ÿåœ¨èº«ä¸Š", "ç©¿å¥½é‹å­ä¸¦æ‹¿é‘°åŒ™", "é–å¥½å®¶é–€ä¸¦ç¢ºèª", "å‰å¾€é™„è¿‘çš„è¶…å¸‚"] },
  { id: 33, difficulty: 'advanced', title: "è£½ä½œç«è…¿ä¸‰æ˜æ²»", icon: "ğŸ¥ª", steps: ["æº–å‚™åå¸ã€ç«è…¿ã€èµ·å¸", "åå¸æ”¾é€²çƒ¤ç®±åŠ ç†±", "ç«è…¿æ”¾å…¥å¹³åº•é‹ç…ç†Ÿ", "åå¸æŠ¹ä¸Šç¾ä¹ƒæ»‹", "ç–Šä¸Šèµ·å¸èˆ‡ç«è…¿", "è“‹ä¸Šç¬¬äºŒç‰‡åå¸", "å°è§’åˆ‡é–‹å¾Œç››ç›¤"] },
  { id: 34, difficulty: 'advanced', title: "æ•´ç†æ›¸æ¡Œ", icon: "ğŸ“š", steps: ["æ”¶èµ·æ¡Œé¢æ‰€æœ‰é›œç‰©", "ç”¨æŠ¹å¸ƒæ“¦æ‹­æ¡Œé¢ç°å¡µ", "å°‡æ–‡å…·æ”¾å›ç­†ç­’", "æ›¸ç±ä¾é«˜åº¦æ•´é½Šæ’åˆ—", "åˆ†é¡å»¢æ£„ç´™å¼µä¸¦ä¸Ÿæ£„", "æ•´ç†æ··äº‚çš„é›»è…¦ç·šè·¯", "æ“ºæ”¾ä¸€ç›†å°æ¤ç‰©è£é£¾"] },
  { id: 35, difficulty: 'advanced', title: "æ¸…æ´—æµ´å®¤", icon: "ğŸš¿", steps: ["æˆ´ä¸Šé˜²è­·æ©¡è† æ‰‹å¥—", "åœ¨ç“·ç£šå™´ç‘æ¸…æ½”åŠ‘", "ç”¨åˆ·å­ç”¨åŠ›æ“æ´—åœ°æ¿", "æ²–åˆ·æ‰æ‰€æœ‰é«’æ±¡æ³¡æ²«", "æ“¦æ‹­é¡å­èˆ‡æ´—è‡‰å°", "æ¸…æ´—é¦¬æ¡¶å…§ç·£ä¸¦æ²–æ°´", "é–‹å•Ÿé€šé¢¨æ‰‡æ™¾ä¹¾æµ´å®¤"] },
  { id: 36, difficulty: 'advanced', title: "ä½¿ç”¨å¸å¡µå™¨", icon: "ğŸ§¹", steps: ["ç¢ºèªå¸å¡µå™¨é›†å¡µç›’å·²ç©º", "æ‹‰å‡ºé›»ç·šä¸¦æ’å…¥æ’åº§", "æŒ‰ä¸‹å•Ÿå‹•é›»æºé–‹é—œ", "ç”±æˆ¿é–“æœ€å…§è™•å¾€å¤–å¸", "è™•ç†æ²™ç™¼ç¸«éš™ç­‰æ­»è§’", "å¸å®Œå¾Œæ²å›é›»ç·š", "æ”¾å›å„²è—å®¤æ”¶ç´"] },
  { id: 37, difficulty: 'advanced', title: "ç™¼é€é›»å­éƒµä»¶", icon: "ğŸ“§", steps: ["æ‰“é–‹é›»è…¦ç™»å…¥ä¿¡ç®±", "é»é¸ã€Œæ’°å¯«ã€æ–°ä¿¡ä»¶", "è¼¸å…¥æ”¶ä»¶äººåœ°å€", "å¯«ä¸‹æ¸…æ¥šçš„ä¿¡ä»¶æ¨™é¡Œ", "è¼¸å…¥æ­£å¼çš„å…§å®¹æ–‡å­—", "æª¢æŸ¥æ˜¯å¦æœ‰é™„ä»¶è¦å‚³", "é»ä¸‹ç™¼é€ä¸¦ç¢ºèªæˆåŠŸ"] },
  { id: 38, difficulty: 'advanced', title: "æ´—ç¢—æµç¨‹", icon: "ğŸ¥£", steps: ["æ¸…é™¤ç›¤ä¸­æ®˜é¤˜é£Ÿç‰©", "å°‡é¤å…·æµ¸æ³¡å…¥æ°´æ§½", "èœç“œå¸ƒæ²¾å–æ´—æ½”ç²¾", "æ“æ´—æ²¹è†©çš„ç¢—ç›¤", "ç”¨å¤§é‡æ¸…æ°´æ²–æ‰æ³¡æ²«", "æ•´é½Šå€’æ‰£åœ¨ç€æ°´æ¶", "ç”¨ä¹¾å¸ƒæ“¦æ‹­æµç†å°"] },
  { id: 39, difficulty: 'advanced', title: "çµ¦æ‰‹æ©Ÿè£æ®¼", icon: "ğŸ“±", steps: ["å°‡æ‰‹æ©Ÿé—œæ©Ÿä»¥ç­–å®‰å…¨", "ç”¨ä¹¾æ·¨å¸ƒæ“¦æ‹­æ‰‹æ©ŸèƒŒ", "æª¢æŸ¥æ®¼å…§æœ‰ç„¡ç°å¡µ", "æ‰‹æ©Ÿå°é½Šæ®¼çš„ä¸Šç·£", "ç”¨åŠ›å£“å…¥ä¸‹æ–¹å…©è§’", "ç¢ºèªé–‹å­”èˆ‡æŒ‰éµå°é½Š", "æ’•é–‹è¢å¹•ä¿è­·è†œ"] },
  { id: 40, difficulty: 'advanced', title: "å‰ªå ±ç´™", icon: "ğŸ“°", steps: ["ç¿»é–‹ç•¶æ—¥çš„å ±ç´™", "æ‰¾åˆ°æ„Ÿèˆˆè¶£çš„æ–‡ç« ", "æº–å‚™å‰ªåˆ€èˆ‡è† æ°´", "æ²¿è‘—æ–‡ç« é‚Šç·£å‰ªä¸‹", "åœ¨å‰ªå ±æœ¬å¡—æŠ¹è† æ°´", "å¹³æ•´è²¼åœ¨ç´™é¢ä¸­å¤®", "å¯«ä¸‹æ—¥æœŸèˆ‡å ±ç´™åç¨±"] },
  { id: 41, difficulty: 'advanced', title: "åƒåŠ è¦–è¨Šæœƒè­°", icon: "ğŸ’»", steps: ["ææ—©äº”åˆ†é˜ååˆ°é›»è…¦å‰", "ç¢ºèªè¦–è¨Šé¡é ­ä½ç½®", "é»é¸æœƒè­°å®¤é€£çµé€²å…¥", "æ¸¬è©¦éº¥å…‹é¢¨æ˜¯å¦æ­£å¸¸", "å‘æœƒè­°æˆå“¡æ®æ‰‹æ‰“æ‹›å‘¼", "æœƒè­°ä¸­å°ˆå¿ƒç­†è¨˜", "çµæŸå¾Œé»é¸é›¢é–‹æœƒè­°"] },
  { id: 42, difficulty: 'advanced', title: "åˆ°è¶…å•†å¯„å–è²¨", icon: "ğŸ“¦", steps: ["å‘ŠçŸ¥åº—å“¡å¯„å–è²¨æœå‹™", "å‡ºç¤ºæ‰‹æ©Ÿç°¡è¨Šæˆ–èº«åˆ†è­‰", "ç¢ºèªåŒ…è£¹æ”¶ä»¶äººå§“å", "åœ¨è¢å¹•ä¸Šç°½åç¢ºèª", "æ”¯ä»˜ç›¸é—œé‹è²»æˆ–æ¬¾é …", "é ˜å–åŒ…è£¹èˆ‡æ”¶æ“š", "é›¢é–‹å¾Œæª¢æŸ¥åŒ…è£¹å®Œå¥½"] },
  { id: 43, difficulty: 'advanced', title: "çƒ¹ç…®å’–å“©é£¯", icon: "ğŸ›", steps: ["å°‡è”¬èœèˆ‡è‚‰é¡åˆ‡å¡Š", "ä¸‹é‹ç‚’é¦™é£Ÿæè‡³ç†Ÿ", "åŠ å…¥é©é‡æ¸…æ°´ç…®æ²¸", "æ”¾å…¥å’–å“©å¡Šä¸¦æ”ªæ‹Œ", "è½‰å°ç«ç‡‰ç…®è‡³æ¿ƒç¨ ", "ç››å¥½ä¸€ç¢—ç†±é¨°é¨°ç™½é£¯", "å°‡å’–å“©æ·‹åœ¨ç™½é£¯ä¸Š"] },
  { id: 44, difficulty: 'advanced', title: "è¦å¾‹é‹å‹•", icon: "ğŸ§˜", steps: ["æ›ä¸Šèˆ’é©çš„é‹å‹•æœ", "ç©¿ä¸Šæ…¢è·‘é‹ä¸¦ç¹«å¥½å¸¶", "åšäº”åˆ†é˜æš–èº«ä¼¸å±•", "é–‹å§‹ä¸»é‹å‹•å¦‚æ…¢è·‘", "éš¨æ™‚è£œå……è¶³å¤ æ°´åˆ†", "åšäº”åˆ†é˜ç·©å’Œé‹å‹•", "å›å®¶å¾Œæ²–æ¾¡æ›´è¡£"] },
  { id: 45, difficulty: 'advanced', title: "å‡ºé–€æ—…è¡Œæ‰“åŒ…", icon: "ğŸ§³", steps: ["åˆ—å‡ºéœ€è¦æ”œå¸¶çš„æ¸…å–®", "æº–å‚™åˆé©å¤§å°è¡Œæç®±", "æ”¾å…¥æ›æ´—è¡£ç‰©èˆ‡å…§è¡£", "æ”¾å…¥ç›¥æ´—ç”¨å…·åŒ…", "æ”¾å…¥æ‰‹æ©Ÿå……é›»å™¨èˆ‡è¡Œå‹•é›»æº", "æ”¾å…¥é‡è¦è­‰ä»¶èˆ‡è—¥ç‰©", "æ‹‰ä¸Šæ‹‰éŠä¸¦ç¢ºèªé‡é‡"] },
  { id: 46, difficulty: 'advanced', title: "æ•´ç†ç›¸ç°¿", icon: "ğŸ“¸", steps: ["æŒ‘é¸å‡ºæœ‰ç´€å¿µåƒ¹å€¼çš„ç…§ç‰‡", "æº–å‚™ä¸€æœ¬å¯¦é«”ç›¸ç°¿", "åœ¨ç…§ç‰‡èƒŒå¾Œå¯«ä¸‹æ—¥æœŸ", "å°‡ç…§ç‰‡å¥—å…¥é€æ˜è­·è¢‹", "ä¾ç…§æ™‚é–“é †åºæ’åˆ—", "åŠ å…¥å°è²¼ç´™æˆ–æ–‡å­—èªªæ˜", "å°‡ç›¸ç°¿æ”¾å›æ›¸æ¶ä¿å­˜"] },
  { id: 47, difficulty: 'advanced', title: "ä¿®ç†è‡ªè¡Œè»Šéˆæ¢", icon: "ğŸš²", steps: ["å°‡å–®è»Šç¿»è½‰å€’ç«‹æ”¾ç½®", "æˆ´ä¸Šé«’æ±¡é˜²è­·æ‰‹å¥—", "å°‡éˆæ¢æ›å›é½’è¼ªç›¤", "æ‰‹è½‰è¸æ¿æ¸¬è©¦é †æš¢åº¦", "å™´ç‘æ½¤æ»‘æ²¹æ–¼éˆæ¢ä¸Š", "ç”¨æŠ¹å¸ƒæ“¦æ‹­å¤šé¤˜æ²¹æ¼¬", "åè½‰å–®è»Šæ¢å¾©æ­£å¸¸"] },
  { id: 48, difficulty: 'advanced', title: "ä½¿ç”¨è‡ªå‹•æ´—è¡£åº—", icon: "ğŸ§º", steps: ["å¸¶è‘—é«’è¡£ç‰©åˆ°è‡ªåŠ©åº—", "é¸å®šä¸€å°ç©ºçš„æ´—è¡£æ©Ÿ", "æ”¾å…¥è¡£ç‰©ä¸¦é—œç·Šé–€", "æŠ•å¹£æˆ–ä½¿ç”¨å„²å€¼å¡", "åŠ å…¥è‡ªå‹•è²©è³£æ©Ÿçš„è Ÿç´™", "ç­‰å¾…æ´—è¡£å®Œæˆæç¤º", "å°‡è¡£ç‰©ç§»è‡³çƒ˜ä¹¾æ©Ÿ"] },
  { id: 49, difficulty: 'advanced', title: "ç¨®æ¤ç›†æ ½", icon: "ğŸª´", steps: ["æŒ‘é¸é©åˆå®¤å…§çš„æ¤ç‰©", "åœ¨ç©ºç›†ä¸­å€’å…¥åº•å±¤åœŸ", "å°‡æ¤ç‰©ç§»å…¥èŠ±ç›†ä¸­å¤®", "å¡«æ»¿å››å‘¨çš„è…è‘‰åœŸ", "ç”¨æ‰‹è¼•è¼•å£“å¯¦è¡¨é¢", "å‡å‹»æ¾†æ°´ç›´åˆ°æµå‡º", "æ”¾ç½®åœ¨æœ‰é™½å…‰é€šé¢¨è™•"] },
  { id: 50, difficulty: 'advanced', title: "æº–å‚™è¿æ¥å®¢äºº", icon: "ğŸ¤", steps: ["ç¢ºèªå®¢äººçš„åˆ°é”æ™‚é–“", "æ‰“æƒå®¢å»³èˆ‡æ²™ç™¼å€", "æº–å‚™å¥½ä¹¾æ·¨çš„æ°´æ¯èŒ¶è‘‰", "æ“ºæ”¾ä¸€äº›æ°´æœæˆ–å°é»å¿ƒ", "æ›ä¸Šæ•´æ½”çš„å®¶å±…æœ", "ææ—©è‡³é–€å£ç­‰å¾…é–€éˆ´", "ç†±æƒ…é–‹é–€è¿æ¥ä¸¦å•å€™"] },
  { id: 76, difficulty: 'advanced', title: "ç¶²è·¯éŠ€è¡Œè½‰å¸³", icon: "ğŸ’»", steps: ["æ‰“é–‹æ‰‹æ©Ÿç¶²è·¯éŠ€è¡ŒAPP", "è¼¸å…¥èº«åˆ†è­‰èˆ‡å¯†ç¢¼ç™»å…¥", "é¸æ“‡ã€Œå³æ™‚è½‰å¸³ã€åŠŸèƒ½", "è¼¸å…¥å—æ¬¾äººçš„éŠ€è¡Œä»£ç¢¼", "å¡«å¯«æ­£ç¢ºçš„éŠ€è¡Œå¸³è™Ÿ", "è¼¸å…¥è½‰å¸³é‡‘é¡ä¸¦é»ç¢ºèª", "å†æ¬¡æ ¸å°æ˜ç´°å¾Œé€å‡º"] },
  { id: 77, difficulty: 'advanced', title: "é ç´„è¨ˆç¨‹è»Š", icon: "ğŸš•", steps: ["æ‰“é–‹å«è»Šæœå‹™APP", "ç¢ºèªå®šä½ç‚ºç›®å‰æ‰€åœ¨åœ°", "æ‰‹å‹•è¼¸å…¥ç›®çš„åœ°é»åç¨±", "é¸æ“‡æƒ³æ­ä¹˜çš„è»Šå‹ç­‰ç´š", "æ ¸å°é ä¼°è»Šè³‡èˆ‡æ™‚é–“", "æŒ‰ä¸‹ã€Œç«‹å³å«è»Šã€æŒ‰éˆ•", "è§€å¯Ÿåœ°åœ–ä¸Šè»Šè¼›çš„è·é›¢"] },
  { id: 78, difficulty: 'advanced', title: "æ•´ç†è—¥ç›’(ä¸€é€±ä»½)", icon: "ğŸ’Š", steps: ["æº–å‚™ä¸€å€‹ä¸ƒå¤©åˆ†è£è—¥ç›’", "æ‹¿å‡ºæ‰€æœ‰å¸¸å‚™è—¥è¢‹æ ¸å°", "ä¾æ—©ä¸­æ™šæ¨™ç¤ºæ‰“é–‹è“‹å­", "é€ä¸€æ”¾å…¥æ­£ç¢ºçš„è—¥ç‰‡æ•¸", "æª¢æŸ¥æ¯å€‹æ ¼ä½æœ‰ç„¡æ¼æ”¾", "ç¢ºå¯¦æ‰£å¥½æ¯å€‹æ ¼è“‹", "å°‡å‰©é¤˜è—¥åŒ…æ”¶å›åŸä½"] },
  { id: 79, difficulty: 'advanced', title: "åœ¨é¤å»³é»é¤", icon: "ğŸ´", steps: ["åä¸‹å¾Œç¿»é–‹ç²¾ç¾èœå–®", "è€ƒæ…®æƒ³åƒçš„ä¸»é¤èˆ‡å£å‘³", "æ‹›æ‰‹ç¤ºæ„æœå‹™ç”Ÿåˆ°æ¡Œé‚Š", "æ¸…æ¥šå£è¿°æƒ³é»çš„é¤é»å", "è©¢å•æœ‰ç„¡å¿Œå£æˆ–éæ•åŸ", "ç¢ºèªé»é¤æ˜ç´°æ˜¯å¦æ­£ç¢º", "åˆä¸Šèœå–®ä¸¦äº¤é‚„çµ¦åº—å“¡"] },
  { id: 80, difficulty: 'advanced', title: "æ›åƒåœ¾è¢‹(å¤§åƒåœ¾æ¡¶)", icon: "ğŸ—‘ï¸", steps: ["å°‡è£æ»¿çš„åƒåœ¾åŒ…ç´®å¥½", "å¾æ¡¶å…§æèµ·ä¸Ÿå…¥æ”¶é›†å€", "æ‹¿å–æ²ç­’å¼æ–°åƒåœ¾è¢‹", "æ’•ä¸‹ä¸€å¼µä¸¦æ‹‰é–‹æ’å¹³", "å°‡è¢‹å£å°æº–åƒåœ¾æ¡¶å…§ç·£", "æŠŠå¤šé¤˜é‚Šç·£åæ‘ºå›ºå®šä½", "æ‹æ‰“åº•éƒ¨ä½¿è¢‹å…§ç„¡ç©ºæ°£"] },
  { id: 81, difficulty: 'advanced', title: "åˆ°åœ–æ›¸é¤¨å€Ÿæ›¸", icon: "ğŸ“–", steps: ["é€²å…¥åœ–æ›¸é¤¨ä¿æŒå®‰éœ", "ä½¿ç”¨æŸ¥è©¢æ©Ÿæœå°‹æ›¸å", "æ‰¾åˆ°å°æ‡‰çš„æ›¸æ¶èˆ‡åˆ†é¡", "å¾æ¶ä¸Šå–ä¸‹æƒ³å€Ÿçš„æ›¸", "æŒå€Ÿé–±è­‰åˆ°è‡ªå‹•å€Ÿæ›¸æ©Ÿ", "åˆ·è®€æ¢ç¢¼ä¸¦ç¢ºèªå†Šæ•¸", "é ˜å–æ”¶æ“šä¸¦å°‡æ›¸æ”¾å…¥è¢‹"] },
  { id: 82, difficulty: 'advanced', title: "åšæ°´æœæ²™æ‹‰", icon: "ğŸ¥—", steps: ["æ´—æ·¨è˜‹æœã€è‘¡è„èˆ‡ç•ªèŒ„", "å°‡å¤§å‹æ°´æœåˆ‡æˆé©ç•¶å¡Šç‹€", "æ”¾å…¥é€æ˜çš„æ²™æ‹‰å¤§ç¢—ä¸­", "åŠ å…¥å„ªæ ¼æˆ–å°‘è¨±èœ‚èœœ", "ç”¨å¤¾å­è¼•è¼•æ”ªæ‹Œå‡å‹»", "ç‘ä¸Šä¸€äº›å …æœæˆ–ç¢é¤…ä¹¾", "æ”¾é€²å†°ç®±å†·è—å¾Œäº«ç”¨"] },
  { id: 83, difficulty: 'advanced', title: "æ¸…æ´—æŠ½æ²¹ç…™æ©Ÿæ¿¾ç¶²", icon: "ğŸ³", steps: ["é—œé–‰å»šæˆ¿ç“¦æ–¯èˆ‡é›»æº", "æ—‹ä¸‹æ¿¾ç¶²å›ºå®šèºçµ²", "æ”¾å…¥åŠ äº†å°è˜‡æ‰“çš„ç†±æ°´", "æµ¸æ³¡åäº”åˆ†é˜åˆ†è§£æ²¹å¢", "ç”¨é‹¼åˆ·ç”¨åŠ›åˆ·æ´—ç¶²æ ¼", "ç”¨æ¸…æ°´æ²–æ·¨æ®˜ç•™æ³¡æ²«", "æ™¾ä¹¾å¾Œé‡æ–°è£å›æ©Ÿèº«"] },
  { id: 84, difficulty: 'advanced', title: "è¾¦ç†é£¯åº—å…¥ä½", icon: "ğŸ¨", steps: ["æŠµé”æ«ƒå°å‡ºç¤ºèº«åˆ†è­‰ä»¶", "æ ¸å°è¨‚æˆ¿æ—¥æœŸèˆ‡æˆ¿å‹", "åœ¨å…¥ä½è¡¨æ ¼ä¸Šè¦ªè‡ªç°½å", "è½å–æ—©é¤æ™‚é–“èˆ‡è¨­æ–½èªªæ˜", "é ˜å–æˆ¿é–“æ„Ÿæ‡‰æˆ¿å¡", "ç¢ºèªè¡Œææ˜¯å¦éœ€è¦é‹é€", "æ­ä¹˜é›»æ¢¯å°‹æ‰¾æˆ¿é–“è™Ÿç¢¼"] },
  { id: 85, difficulty: 'advanced', title: "ä½¿ç”¨å’–å•¡æ©Ÿ(è† å›Šå¼)", icon: "â˜•", steps: ["ç¢ºèªå¾Œæ–¹æ°´ç®±æ°´é‡å……è¶³", "æŒ‰ä¸‹é–‹é—œé ç†±è‡³ç¶ ç‡ˆäº®", "æ‰“é–‹ä¸Šè“‹æ”¾å…¥å’–å•¡è† å›Š", "æ”¾ä¸‹æŠŠæ‰‹é–ç·Šè† å›Šå€‰", "å°‡æ¯å­æ”¾åœ¨å‡ºæ°´å£ä¸‹æ–¹", "æŒ‰å¤§æ¯æˆ–å°æ¯å•Ÿå‹•èƒå–", "ä¸Ÿæ£„ç”¨éçš„è† å›Šä¸¦é—œæ©Ÿ"] },
  { id: 86, difficulty: 'advanced', title: "æ•´ç†èˆŠè¡£æè´ˆ", icon: "ğŸ§¥", steps: ["æª¢æŸ¥è¡£ç‰©æœ‰ç„¡ç ´ææ±™æ¼¬", "å°‡ä¸ç©¿çš„è¡£ç‰©åˆ†é¡æ•´ç†", "ç”¨æ´—è¡£æ©Ÿæ¸…æ´—ä¸¦æ›¬ä¹¾", "æ•´é½Šæ‘ºç–Šæ”¾å…¥ç´™ç®±ä¸­", "å°å¥½ç®±å£ä¸¦å¯«ä¸Šæè´ˆé¡", "ä¸Šç¶²å°‹æ‰¾åˆæ³•çš„å…¬ç›Šåœ˜é«”", "è¦ªè‡ªè¼‰é€æˆ–è«‹ç‰©æµä¾†æ”¶"] },
  { id: 87, difficulty: 'advanced', title: "å®‰è£è¦–è¨Šè»Ÿé«”(Zoom)", icon: "ğŸ’»", steps: ["æ‰“é–‹ç¶²é ç€è¦½å™¨æœå°‹å®˜ç¶²", "é»é¸ä¸‹è¼‰æŒ‰éˆ•ä¸‹è¼‰å®‰è£æª”", "é»æ“Šå…©ä¸‹å®‰è£æª”é–‹å§‹å®‰è£", "è¼¸å…¥é›»å­ä¿¡ç®±è¨»å†Šå¸³è™Ÿ", "åˆ°ä¿¡ç®±é»é¸é©—è­‰ä¿¡å•Ÿç”¨", "è¨­å®šå€‹äººé ­åƒèˆ‡é¡¯ç¤ºåç¨±", "è¼¸å…¥æœƒè­°ç·¨è™Ÿæ¸¬è©¦é¡é ­"] },
  { id: 88, difficulty: 'advanced', title: "æ¸…æ´—ç©ºèª¿æ¿¾ç¶²", icon: "â„ï¸", steps: ["æ‹”æ‰å®¤å…§æ©Ÿé›»æºæ’é ­", "é›™æ‰‹æ‰“é–‹å®¤å…§æ©Ÿå¤–è“‹", "å°å¿ƒå–å‡ºé»‘è‰²å°¼é¾æ¿¾ç¶²", "ç”¨è“®è“¬é ­æ²–æ´—ç°å¡µç©ç´¯é¢", "æ”¾åœ¨é™°æ¶¼è™•å®Œå…¨é¢¨ä¹¾", "ä¾åºæ¨å›åŸæ§½ä½ä¸¦æ‰£ç·Š", "æ’å›é›»æºå•Ÿå‹•é€é¢¨æ¸¬è©¦"] },
  { id: 89, difficulty: 'advanced', title: "åˆ°éƒµå±€å¯„åŒ…è£¹", icon: "ğŸ“¦", steps: ["å°‡ç‰©å“æ”¾å…¥çµå¯¦çš„ç´™ç®±", "å¡«å¯«å¯„ä»¶äººèˆ‡æ”¶ä»¶äººå§“å", "æŒç®±å­åˆ°éƒµå±€æŠ½å–è™Ÿç¢¼ç‰Œ", "ç­‰å€™å«è™Ÿä¸¦æ¬ä¸Šæ«ƒå°ç§¤é‡", "é¸æ“‡æ›è™Ÿæˆ–å¿«æ·å¯„é€æ–¹å¼", "æ”¯ä»˜é‹è²»ä¸¦é ˜å–åŸ·æ“š", "è¨˜éŒ„å–®è™Ÿä»¥ä¾¿å¾ŒçºŒè¿½è¹¤"] },
  { id: 90, difficulty: 'advanced', title: "ä½¿ç”¨çƒ˜è¡£æ©Ÿ", icon: "ğŸ”¥", steps: ["å°‡è„«æ°´å¾Œçš„æ¿•è¡£ç‰©æ”¾å…¥", "æ¸…ç†éæ¿¾ç¶²ä¸Šçš„æ£‰çµ®", "é—œç·Šçƒ˜è¡£æ©Ÿåœ“å½¢ç»ç’ƒé–€", "ä¾æè³ªè¨­å®šçƒ˜ä¹¾æº«åº¦", "æŠ•å¹£æˆ–é»é¸å•Ÿå‹•æŒ‰éˆ•", "ç­‰å¾…é‹è½‰çµæŸè­¦å‘ŠéŸ³", "å–å‡ºç†±é¨°é¨°çš„ä¹¾è¡£ç‰©"] },
  { id: 91, difficulty: 'advanced', title: "æ­ä¹˜é«˜éµ(è³¼ç¥¨åˆ°ä¹˜è»Š)", icon: "ğŸš„", steps: ["åˆ°è‡ªå‹•å”®ç¥¨æ©Ÿé¸æ“‡è»Šæ¬¡", "è¼¸å…¥èº«åˆ†è­‰å­—è™Ÿèˆ‡å¼µæ•¸", "æŠ•å…¥ç´™éˆ”æˆ–åˆ·å¡ä»˜è²»", "é ˜å–å¯¦é«”ç£å¡è»Šç¥¨", "å°‡ç¥¨æ’å…¥é–˜é–€æ„Ÿæ‡‰é€²å…¥", "æ‰¾åˆ°å°æ‡‰çš„æœˆå°èˆ‡è»Šå»‚", "å°è™Ÿå…¥åº§ä¸¦ç¹«å¥½é¤æ¡Œ"] },
  { id: 92, difficulty: 'advanced', title: "æ›´æ–°æ‰‹æ©Ÿç³»çµ±", icon: "ğŸ“±", steps: ["é€²å…¥æ‰‹æ©Ÿçš„ã€Œè¨­å®šã€é¸å–®", "é»é¸ã€Œè»Ÿé«”æ›´æ–°ã€é …ç›®", "æŒ‰ä¸‹è¼‰ä¸¦å®‰è£æ›´æ–°æª”æ¡ˆ", "ç¢ºèªé›»é‡å……è¶³æˆ–æ¥ä¸Šå……é›»", "ç­‰å¾…é€²åº¦æ¢è·‘å®Œä¸¦é‡å•Ÿ", "è¼¸å…¥å¯†ç¢¼é‡æ–°é€²å…¥ä¸»ç•«é¢", "æª¢æŸ¥æ–°åŠŸèƒ½æ˜¯å¦é‹ä½œæ­£å¸¸"] },
  { id: 93, difficulty: 'advanced', title: "æº–å‚™å®¶åº­èšé¤èœå–®", icon: "ğŸ¥˜", steps: ["ç¢ºèªèšé¤äººæ•¸èˆ‡é£²é£Ÿåå¥½", "æŒ‘é¸å†·ç›¤ã€ä¸»èœèˆ‡æ¹¯å“", "åˆ—å‡ºæ‰€éœ€é£Ÿæèˆ‡èª¿å‘³æ–™", "ææ—©ä¸€å¤©åˆ°å¸‚å ´æ¡è²·", "æ¸…æ´—é£Ÿæä¸¦é€²è¡Œå‰è™•ç†", "ä¾åºä¸‹é‹çƒ¹é£ªå„ç¨®æ–™ç†", "æ“ºç›¤ä¸Šæ¡Œä¸¦è£é£¾é¤é£²å€"] },
  { id: 94, difficulty: 'advanced', title: "ä½¿ç”¨é›»å­åœ°åœ–å°èˆª", icon: "ğŸ“", steps: ["æ‰“é–‹Googleåœ°åœ–æ‡‰ç”¨ç¨‹å¼", "è¼¸å…¥è¦å»çš„åœ°æ¨™æˆ–åœ°å€", "é¸æ“‡äº¤é€šæ–¹å¼(è»Šã€æ­¥ã€è»Š)", "é»é¸ä¸‹æ–¹ã€Œé–‹å§‹å°èˆªã€éˆ•", "ä¾ç…§èªéŸ³æŒ‡ç¤ºé€²è¡Œè½‰å½", "æ³¨æ„è·¯æ¨™èˆ‡å°èˆªç®­é ­æ–¹å‘", "æŠµé”çµ‚é»å¾Œé—œé–‰å°èˆªç¨‹å¼"] },
  { id: 95, difficulty: 'advanced', title: "ç”³è«‹æœƒå“¡å¡(å¯¦é«”åº—é¢)", icon: "ğŸ’³", steps: ["è©¢å•åº—å“¡æœ‰ç„¡æœƒå“¡åˆ¶åº¦", "å¡«å¯«å§“åã€é›»è©±èˆ‡ç”Ÿæ—¥è¡¨", "å‹¾é¸åŒæ„å€‹è³‡è™•ç†èªªæ˜", "äº¤é‚„çµ¦åº—å“¡é€²è¡Œé›»è…¦å»ºæª”", "ç•¶å ´é ˜å–æˆ–è¨­å®šé›»å­å¡è™Ÿ", "ä¸‹è¼‰åº—å®¶çš„å°ˆå±¬æ‰‹æ©ŸAPP", "é¦–æ¬¡æ¶ˆè²»ç´¯ç©ç´…åˆ©é»æ•¸"] },
  { id: 96, difficulty: 'advanced', title: "æ¸…æ´—çª—ç°¾", icon: "ğŸªŸ", steps: ["æ¬æ¢¯å­å¸ä¸‹çª—ç°¾æ›é‰¤", "å–ä¸‹æ‰€æœ‰é‡‘å±¬æˆ–å¡‘è† æ‰£", "æ”¾å…¥å¤§å‹æ´—è¡£è¢‹ä¿è­·", "ä½¿ç”¨ä¸­æ€§æ´—åŠ‘é€²è¡Œå¼±æ´—", "è„«æ°´å¾Œåœ¨é™°æ¶¼è™•åŠæ›æ™¾ä¹¾", "ç”¨è’¸æ°£ç†¨æ–—ç‡™å¹³æ‘ºç—•", "é‡æ–°æ›å›çª—æ¡¿ä¸¦æ•´ç†æ‘ºçšº"] },
  { id: 97, difficulty: 'advanced', title: "è¨­å®šé¬§é˜(å¤šå€‹æ™‚æ®µ)", icon: "â°", steps: ["æ‰“é–‹æ‰‹æ©Ÿæ™‚é˜æ‡‰ç”¨ç¨‹å¼", "åˆ‡æ›åˆ°ã€Œé¬§é˜ã€åˆ†é ", "æŒ‰åŠ è™Ÿæ–°å¢ä¸€å€‹èµ·åºŠæ™‚é–“", "è¨­å®šéˆ´è²èˆ‡éœ‡å‹•æ¨¡å¼", "å„²å­˜å¾Œå†æŒ‰åŠ è™Ÿè¨­åˆç¡é˜", "æª¢æŸ¥å³ä¸Šè§’é¬§é˜åœ–ç¤ºæœ‰ç„¡", "ç¡å‰ç¢ºèªéŸ³é‡æ˜¯å¦é–‹å•Ÿ"] },
  { id: 98, difficulty: 'advanced', title: "é ˜å–ç¶²è·¯è³¼ç‰©åŒ…è£¹(iéƒµç®±)", icon: "ğŸ“¦", steps: ["æ”¶åˆ°å–ä»¶ä»£ç¢¼ç°¡è¨Šé€šçŸ¥", "èµ°åˆ°æœ€è¿‘çš„iéƒµç®±æ«ƒä½å‰", "é»é¸è¢å¹•ä¸Šçš„ã€Œé ˜å–éƒµä»¶ã€", "è¼¸å…¥æ‰‹æ©Ÿè™Ÿç¢¼èˆ‡ç°¡è¨Šä»£ç¢¼", "ç­‰å¾…å°æ‡‰çš„æ«ƒé–€è‡ªå‹•å½ˆé–‹", "å–å‡ºåŒ…è£¹ä¸¦ç¢ºå¯¦é—œå¥½é–€", "æƒæåŒ…è£¹ç¢ºèªç„¡èª¤å¾Œé›¢é–‹"] },
  { id: 99, difficulty: 'advanced', title: "æ•´ç†ç›†æ ½æ¯è‘‰", icon: "ğŸª´", steps: ["æ¬ç›†æ ½åˆ°å…‰ç·šå……è¶³è™•", "æˆ´ä¸Šåœ’è—æ‰‹å¥—æº–å‚™å‰ªåˆ€", "ä»”ç´°æª¢æŸ¥æ¤ç‰©ç™¼é»ƒè‘‰ç‰‡", "å¾è‘‰æŸ„åŸºéƒ¨æ–œå‰ªä¸‹æ¯è‘‰", "æ¸…ç†åœŸè¡¨æ‰è½çš„æ¯æè½è‘‰", "è¼•è¼•ç¿»å‹•è¡¨å±¤åœŸå£¤é€šæ°£", "å™´ç‘é©é‡æ°´åˆ†ä¿æŒæ¿•æ½¤"] },
  { id: 100, difficulty: 'advanced', title: "è¦åŠƒä¸€æ—¥æ—…éŠè¡Œç¨‹", icon: "ğŸ—ºï¸", steps: ["æ±ºå®šæƒ³å»çš„åŸå¸‚æˆ–ä¸»é¡Œ", "ä¸Šç¶²æœå°‹å¿…å»æ™¯é»èˆ‡ç¾é£Ÿ", "åœ¨åœ°åœ–ä¸Šå®‰æ’é †è·¯çš„å‹•ç·š", "ä¼°è¨ˆæ¯å€‹é»çš„åœç•™æ™‚é–“", "æŸ¥é–±äº¤é€šå·¥å…·æ™‚åˆ»è¡¨", "é ç´„ç†±é–€é¤å»³æˆ–é–€ç¥¨", "å°‡è¡Œç¨‹å­˜å…¥æ‰‹æ©Ÿå‚™å¿˜éŒ„"] }
];

const App = () => {
  // éŠæˆ²ç‹€æ…‹
  const [gameState, setGameState] = useState('menu'); // 'menu', 'taskSelection', 'playing', 'result', 'history'
  const [difficulty, setDifficulty] = useState(null);
  const [currentTask, setCurrentTask] = useState(null);
  const [shuffledOptions, setShuffledOptions] = useState([]);
  const [userSequence, setUserSequence] = useState([]);
  const [feedback, setFeedback] = useState(null);
  
  // ç´€éŒ„æ•¸æ“š
  const [timer, setTimer] = useState(0);
  const [mistakes, setMistakes] = useState(0);
  const [historyRecords, setHistoryRecords] = useState([]);
  
  const timerRef = useRef(null);

  // åˆå§‹åŒ–è¨ˆæ™‚å™¨
  useEffect(() => {
    if (gameState === 'playing') {
      timerRef.current = setInterval(() => {
        setTimer(prev => prev + 1);
      }, 1000);
    } else {
      clearInterval(timerRef.current);
    }
    return () => clearInterval(timerRef.current);
  }, [gameState]);

  // é¸é›£åº¦
  const selectDifficulty = (diff) => {
    setDifficulty(diff);
    setGameState('taskSelection');
  };

  // é–‹å§‹ç‰¹å®šä»»å‹™
  const startTask = (task) => {
    setCurrentTask(task);
    const shuffled = [...task.steps].sort(() => Math.random() - 0.5);
    setShuffledOptions(shuffled);
    setUserSequence([]);
    setFeedback(null);
    setTimer(0);
    setMistakes(0);
    setGameState('playing');
  };

  // è™•ç†é»æ“Šæ­¥é©Ÿ
  const handleStepClick = (step) => {
    if (feedback === 'correct' || userSequence.includes(step)) return;

    const nextSequence = [...userSequence, step];
    const currentIndex = nextSequence.length - 1;

    // æª¢æŸ¥æ­£ç¢ºæ€§
    if (step !== currentTask.steps[currentIndex]) {
      setFeedback('incorrect');
      setMistakes(prev => prev + 1);
      // è‡ªå‹•ç§»é™¤éŒ¯èª¤é¸é …
      setTimeout(() => {
        setFeedback(null);
      }, 1000);
    } else {
      setUserSequence(nextSequence);
      if (nextSequence.length === currentTask.steps.length) {
        setFeedback('correct');
        // å„²å­˜ç´€éŒ„
        const newRecord = {
          id: Date.now(),
          title: currentTask.title,
          difficulty: currentTask.difficulty,
          time: timer,
          errors: mistakes,
          date: new Date().toLocaleDateString() + ' ' + new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})
        };
        setHistoryRecords(prev => [newRecord, ...prev]);
        setTimeout(() => setGameState('result'), 1500);
      }
    }
  };

  const formatTime = (seconds) => {
    const mins = Math.floor(seconds / 60);
    const secs = seconds % 60;
    return `${mins}:${secs.toString().padStart(2, '0')}`;
  };

  const resetToMenu = () => {
    setGameState('menu');
    setDifficulty(null);
    setCurrentTask(null);
  };

  const filteredTasks = TASKS_LIBRARY.filter(t => t.difficulty === difficulty);

  return (
    <div className="min-h-screen bg-slate-50 p-4 md:p-8 font-sans text-slate-800">
      <div className="max-w-2xl mx-auto bg-white rounded-3xl shadow-2xl overflow-hidden border border-slate-100">
        
        {/* Header */}
        <div className="bg-indigo-700 p-6 text-white flex justify-between items-center shadow-lg">
          <div>
            <h1 className="text-2xl font-bold flex items-center tracking-tight">
              <Layers className="mr-2" size={26} /> ç”Ÿæ´»æ­¥é©Ÿå¤§å¸«
            </h1>
            <p className="text-indigo-200 text-xs mt-1 uppercase tracking-widest font-semibold">100+ ä»»å‹™è¨“ç·´ç³»çµ±</p>
          </div>
          <div className="flex gap-2">
            {gameState !== 'menu' && (
              <button onClick={() => setGameState('history')} className="p-2 bg-indigo-600 hover:bg-indigo-500 rounded-full transition-all shadow-inner">
                <History size={20} />
              </button>
            )}
            {gameState !== 'menu' && (
              <button onClick={resetToMenu} className="p-2 bg-indigo-600 hover:bg-indigo-500 rounded-full transition-all shadow-inner">
                <Home size={20} />
              </button>
            )}
          </div>
        </div>

        <div className="p-6">
          {/* ä¸»é¸å–®ï¼šé›£åº¦é¸æ“‡ */}
          {gameState === 'menu' && (
            <div className="space-y-6 text-center py-4">
              <div className="flex justify-center gap-4 mb-2">
                <button 
                   onClick={() => setGameState('history')}
                   className="flex items-center gap-2 px-4 py-2 bg-slate-100 text-slate-600 rounded-full hover:bg-slate-200 transition-colors font-bold text-sm"
                >
                  <History size={16} /> æŸ¥çœ‹æ­·å²æˆç¸¾
                </button>
              </div>
              <h2 className="text-xl font-bold text-slate-600">è«‹é¸æ“‡æŒ‘æˆ°é›£åº¦ï¼š</h2>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                <button 
                  onClick={() => selectDifficulty('basic')}
                  className="group relative overflow-hidden p-8 bg-white border-4 border-emerald-100 rounded-3xl hover:border-emerald-500 transition-all hover:shadow-xl"
                >
                  <div className="absolute -right-4 -bottom-4 opacity-5 group-hover:opacity-10 transition-opacity">
                    <Layers size={120} />
                  </div>
                  <div className="text-5xl mb-4 group-hover:scale-110 transition-transform">ğŸŒ±</div>
                  <h3 className="text-2xl font-black text-emerald-700">åŸºç¤ç­‰ç´š</h3>
                  <div className="mt-3 flex flex-col items-center">
                     <span className="bg-emerald-100 text-emerald-700 px-3 py-1 rounded-full text-xs font-bold mb-1">50 å€‹ä»»å‹™</span>
                     <span className="text-emerald-600/70 font-bold">æ¯é¡Œ 5 æ­¥é©Ÿ</span>
                  </div>
                </button>
                <button 
                  onClick={() => selectDifficulty('advanced')}
                  className="group relative overflow-hidden p-8 bg-white border-4 border-amber-100 rounded-3xl hover:border-amber-500 transition-all hover:shadow-xl"
                >
                  <div className="absolute -right-4 -bottom-4 opacity-5 group-hover:opacity-10 transition-opacity">
                    <Layers size={120} />
                  </div>
                  <div className="text-5xl mb-4 group-hover:scale-110 transition-transform">ğŸŒ³</div>
                  <h3 className="text-2xl font-black text-amber-700">é€²éšç­‰ç´š</h3>
                  <div className="mt-3 flex flex-col items-center">
                     <span className="bg-amber-100 text-amber-700 px-3 py-1 rounded-full text-xs font-bold mb-1">50 å€‹ä»»å‹™</span>
                     <span className="text-amber-600/70 font-bold">æ¯é¡Œ 7 æ­¥é©Ÿ</span>
                  </div>
                </button>
              </div>
            </div>
          )}

          {/* ä»»å‹™æ¸…å–® */}
          {gameState === 'taskSelection' && (
            <div className="space-y-4">
              <div className="flex justify-between items-center border-b pb-4 mb-4">
                <button onClick={() => setGameState('menu')} className="flex items-center text-indigo-600 font-bold hover:translate-x-1 transition-transform">
                  <ChevronLeft size={20} /> è¿”å›é›£åº¦é¸æ“‡
                </button>
                <div className={`px-4 py-1 rounded-full text-xs font-black uppercase ${difficulty === 'basic' ? 'bg-emerald-100 text-emerald-700' : 'bg-amber-100 text-amber-700'}`}>
                   {difficulty === 'basic' ? 'åŸºç¤ä»»å‹™' : 'é€²éšä»»å‹™'}
                </div>
              </div>
              <div className="grid grid-cols-1 gap-3 max-h-[480px] overflow-y-auto pr-2 custom-scrollbar">
                {filteredTasks.map((task) => (
                  <button
                    key={task.id}
                    onClick={() => startTask(task)}
                    className="flex items-center p-4 bg-slate-50 border-2 border-transparent rounded-2xl hover:bg-white hover:border-indigo-400 hover:shadow-lg transition-all text-left group"
                  >
                    <span className="text-3xl mr-4 bg-white w-12 h-12 flex items-center justify-center rounded-xl shadow-sm group-hover:scale-110 transition-transform">{task.icon}</span>
                    <div className="flex-1">
                       <span className="text-lg font-bold text-slate-700 block">{task.title}</span>
                       <span className="text-xs text-slate-400 font-medium">ä»»å‹™ ID: #{task.id}</span>
                    </div>
                    <ArrowRight size={18} className="text-slate-300 group-hover:text-indigo-500" />
                  </button>
                ))}
              </div>
            </div>
          )}

          {/* æ­·å²æˆç¸¾å–® */}
          {gameState === 'history' && (
            <div className="space-y-4">
              <div className="flex justify-between items-center border-b pb-4 mb-4">
                <h2 className="text-xl font-black text-slate-700 flex items-center">
                  <History className="mr-2 text-indigo-600" /> å­¸ç¿’æˆå°±æ¦œ
                </h2>
                <button 
                  onClick={() => setHistoryRecords([])} 
                  className="text-red-400 hover:text-red-600 flex items-center text-xs font-bold"
                >
                  <Trash2 size={14} className="mr-1" /> æ¸…é™¤æ‰€æœ‰è¨˜éŒ„
                </button>
              </div>
              
              {historyRecords.length === 0 ? (
                <div className="py-20 text-center text-slate-400">
                  <BarChart size={48} className="mx-auto mb-4 opacity-20" />
                  <p className="font-bold">ç›®å‰é‚„æ²’æœ‰æŒ‘æˆ°ç´€éŒ„å–”ï¼</p>
                  <button onClick={() => setGameState('menu')} className="mt-4 text-indigo-600 font-bold underline">ç¾åœ¨å°±å»ç·´ç¿’</button>
                </div>
              ) : (
                <div className="space-y-3 max-h-[500px] overflow-y-auto pr-2 custom-scrollbar">
                  {historyRecords.map(record => (
                    <div key={record.id} className="p-4 bg-slate-50 rounded-2xl border border-slate-100 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3">
                      <div>
                        <div className="flex items-center gap-2 mb-1">
                          <span className={`w-2 h-2 rounded-full ${record.difficulty === 'basic' ? 'bg-emerald-500' : 'bg-amber-500'}`}></span>
                          <h4 className="font-black text-slate-700">{record.title}</h4>
                        </div>
                        <div className="flex items-center text-[10px] text-slate-400 font-bold uppercase tracking-tighter">
                          <Calendar size={12} className="mr-1" /> {record.date}
                        </div>
                      </div>
                      <div className="flex gap-4">
                        <div className="text-center">
                          <div className="text-xs text-slate-400 font-bold">è€—æ™‚</div>
                          <div className="font-black text-indigo-600">{formatTime(record.time)}</div>
                        </div>
                        <div className="text-center">
                          <div className="text-xs text-slate-400 font-bold">éŒ¯èª¤</div>
                          <div className={`font-black ${record.errors > 0 ? 'text-red-500' : 'text-emerald-500'}`}>{record.errors}</div>
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
              )}
              <button 
                onClick={() => setGameState('menu')}
                className="w-full mt-4 py-3 bg-indigo-600 text-white rounded-xl font-bold shadow-lg hover:bg-indigo-700 transition-colors"
              >
                è¿”å›ä¸»é¸å–®
              </button>
            </div>
          )}

          {/* éŠæˆ²é€²è¡Œä¸­ */}
          {gameState === 'playing' && currentTask && (
            <div className="space-y-6">
              {/* é ‚éƒ¨æ•¸æ“šåˆ— */}
              <div className="flex justify-between items-center bg-slate-50 px-4 py-2 rounded-full border border-slate-100">
                <div className="flex items-center text-indigo-600 font-black">
                  <Clock size={16} className="mr-1" /> {formatTime(timer)}
                </div>
                <div className="flex items-center text-red-500 font-black">
                  <AlertTriangle size={16} className="mr-1" /> éŒ¯èª¤: {mistakes}
                </div>
              </div>

              <div className="text-center">
                <span className="text-5xl mb-2 block">{currentTask.icon}</span>
                <h2 className="text-2xl font-black text-slate-800 tracking-tight">{currentTask.title}</h2>
                <p className="text-slate-400 text-sm font-bold">è«‹æŒ‰æ­£ç¢ºé †åºé»é¸ä¸‹æ–¹æ­¥é©Ÿ</p>
              </div>

              {/* å·²å®Œæˆæ­¥é©Ÿå€åŸŸ */}
              <div className="min-h-[160px] bg-indigo-50/50 rounded-3xl p-5 border-2 border-dashed border-indigo-200">
                <div className="flex flex-wrap gap-3">
                  {userSequence.map((step, idx) => (
                    <div key={idx} className="bg-white text-indigo-700 border-2 border-indigo-600 px-4 py-2 rounded-2xl flex items-center shadow-sm animate-in zoom-in-50 duration-300">
                      <span className="mr-3 font-black bg-indigo-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-[10px]">
                        {idx + 1}
                      </span>
                      <span className="font-bold text-sm">{step}</span>
                    </div>
                  ))}
                  {userSequence.length === 0 && (
                    <div className="flex flex-col items-center justify-center w-full py-10 text-indigo-300">
                      <Layers size={32} className="mb-2 opacity-20" />
                      <p className="font-black italic text-sm">ç­‰å¾…ç¬¬ä¸€å€‹æ­¥é©Ÿ...</p>
                    </div>
                  )}
                </div>
              </div>

              {/* å³æ™‚å›é¥‹ */}
              <div className="h-6 flex justify-center items-center">
                {feedback === 'correct' && (
                  <div className="flex items-center text-emerald-600 font-black animate-bounce text-sm">
                    <CheckCircle2 className="mr-2" size={18} /> å¤ªæ£’äº†ï¼é€²æ­¥ç¥é€Ÿï¼
                  </div>
                )}
                {feedback === 'incorrect' && (
                  <div className="flex items-center text-red-500 font-black animate-shake text-sm">
                    <XCircle className="mr-2" size={18} /> é †åºå¥½åƒæœ‰é»å•é¡Œå–”ï¼
                  </div>
                )}
              </div>

              {/* å¾…é¸å€ */}
              <div className="grid grid-cols-1 gap-2">
                {shuffledOptions.map((step, idx) => {
                  const isSelected = userSequence.includes(step);
                  return (
                    <button
                      key={idx}
                      disabled={isSelected || feedback === 'incorrect' || feedback === 'correct'}
                      onClick={() => handleStepClick(step)}
                      className={`text-left p-4 rounded-2xl border-2 transition-all duration-300 font-bold ${
                        isSelected 
                        ? 'bg-slate-50 border-slate-100 text-slate-300 line-through scale-95' 
                        : 'bg-white border-slate-200 text-slate-700 hover:border-indigo-400 hover:bg-indigo-50 active:scale-95 shadow-sm'
                      }`}
                    >
                      {step}
                    </button>
                  );
                })}
              </div>
            </div>
          )}

          {/* çµç®—çµæœ */}
          {gameState === 'result' && (
            <div className="text-center py-8 space-y-6">
              <div className="relative inline-block">
                <div className="p-8 bg-yellow-50 rounded-full text-yellow-500 animate-pulse">
                  <Award size={80} strokeWidth={2.5} />
                </div>
                <div className="absolute -top-2 -right-2 bg-red-500 text-white text-xs font-black px-3 py-1 rounded-full shadow-lg">
                  å®Œæˆä»»å‹™ï¼
                </div>
              </div>
              
              <div className="space-y-1">
                <h2 className="text-3xl font-black text-slate-800">æŒ‘æˆ°å¤§æˆåŠŸï¼</h2>
                <p className="text-slate-500 font-bold">æ‚¨å‰›å®Œæˆäº†ï¼š<span className="text-indigo-600">{currentTask.title}</span></p>
              </div>

              <div className="grid grid-cols-2 gap-4 max-w-sm mx-auto">
                 <div className="bg-slate-50 p-4 rounded-2xl border border-slate-100 shadow-inner">
                    <div className="text-slate-400 text-xs font-bold mb-1 flex items-center justify-center">
                      <Clock size={12} className="mr-1" /> ç¸½è€—æ™‚
                    </div>
                    <div className="text-2xl font-black text-indigo-600">{formatTime(timer)}</div>
                 </div>
                 <div className="bg-slate-50 p-4 rounded-2xl border border-slate-100 shadow-inner">
                    <div className="text-slate-400 text-xs font-bold mb-1 flex items-center justify-center">
                      <AlertTriangle size={12} className="mr-1" /> éŒ¯èª¤æ¬¡æ•¸
                    </div>
                    <div className={`text-2xl font-black ${mistakes === 0 ? 'text-emerald-500' : 'text-red-500'}`}>{mistakes}</div>
                 </div>
              </div>
              
              <div className="pt-6 flex flex-col gap-3 justify-center max-w-sm mx-auto">
                <button
                  onClick={() => startTask(currentTask)}
                  className="w-full py-4 bg-indigo-50 text-indigo-700 rounded-2xl font-black hover:bg-indigo-100 transition-all flex items-center justify-center border-2 border-indigo-100"
                >
                  <RefreshCw size={20} className="mr-2" /> å†ç·´ä¸€æ¬¡
                </button>
                <button
                  onClick={() => setGameState('taskSelection')}
                  className="w-full py-4 bg-indigo-700 text-white rounded-2xl font-black hover:bg-indigo-800 transition-all flex items-center justify-center shadow-xl transform active:scale-95"
                >
                  <Play size={20} className="mr-2" /> ä¸‹ä¸€å€‹ä»»å‹™
                </button>
                <button
                  onClick={() => setGameState('history')}
                  className="w-full py-2 text-slate-400 text-sm font-bold hover:text-indigo-600 underline underline-offset-4"
                >
                  æŸ¥çœ‹å®Œæ•´æˆç¸¾å–®
                </button>
              </div>
            </div>
          )}
        </div>
      </div>
      
      <div className="mt-8 text-center space-y-2">
        <p className="text-slate-400 text-[10px] font-black uppercase tracking-widest">
          Cognitive Rehabilitation Tool / Task Sequencing Module
        </p>
        <div className="flex justify-center gap-4 text-slate-300">
           <div className="flex items-center gap-1 text-[10px]"><span className="w-2 h-2 rounded-full bg-emerald-400"></span> 5 æ­¥é©Ÿ (Basic)</div>
           <div className="flex items-center gap-1 text-[10px]"><span className="w-2 h-2 rounded-full bg-amber-400"></span> 7 æ­¥é©Ÿ (Advanced)</div>
        </div>
      </div>

      <style dangerouslySetInnerHTML={{ __html: `
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          25% { transform: translateX(-4px); }
          75% { transform: translateX(4px); }
        }
        .animate-shake { animation: shake 0.15s ease-in-out 0s 2; }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
      `}} />
    </div>
  );
};

export default App;
